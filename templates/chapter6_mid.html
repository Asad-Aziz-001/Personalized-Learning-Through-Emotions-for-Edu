<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sentellect - Conic Sections (Chapter 6)</title>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* ===== Base Styles ===== */
    :root {
      --primary: #1e40af;
      --primary-light: #3b82f6;
      --primary-dark: #1e3a8a;
      --secondary: #f59e0b;
      --accent: #ec4899;
      --text: #1e293b;
      --text-light: #64748b;
      --text-lighter: #94a3b8;
      --bg: #f8fafc;
      --white: #ffffff;
      --gray: #e2e8f0;
      --gray-light: #f1f5f9;
      --success: #10b981;
      --card-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
      --hover-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      background-color: var(--bg);
      color: var(--text);
      line-height: 1.6;
      overflow-x: hidden;
    }

    h1, h2, h3, h4 {
      font-weight: 700;
      line-height: 1.2;
    }

    a {
      text-decoration: none;
      color: inherit;
    }

    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    section {
      padding: 80px 0;
    }

    .section-title {
      text-align: center;
      margin-bottom: 50px;
    }

    .section-title h2 {
      font-size: 2.5rem;
      color: var(--primary);
      margin-bottom: 15px;
      position: relative;
      display: inline-block;
    }

    .section-title h2::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background: var(--secondary);
      border-radius: 2px;
    }

    .section-title p {
      color: var(--text-light);
      font-size: 1.1rem;
      max-width: 700px;
      margin: 0 auto;
    }

    .btn {
      display: inline-block;
      padding: 12px 28px;
      border-radius: 50px;
      font-weight: 600;
      transition: all 0.3s ease;
      text-align: center;
      cursor: pointer;
    }

    .btn-primary {
      background-color: var(--primary);
      color: var(--white);
      box-shadow: 0 4px 15px rgba(30, 64, 175, 0.3);
    }

    .btn-primary:hover {
      background-color: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(30, 64, 175, 0.4);
    }

    .btn-secondary {
      background-color: var(--white);
      color: var(--primary);
      border: 2px solid var(--primary);
    }

    .btn-secondary:hover {
      background-color: var(--primary);
      color: var(--white);
      transform: translateY(-2px);
    }

    /* ===== Animations ===== */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    @keyframes shimmer {
      0% { background-position: -1000px 0; }
      100% { background-position: 1000px 0; }
    }

    .animate {
      animation: fadeIn 0.8s ease forwards;
    }

    .delay-1 { animation-delay: 0.2s; }
    .delay-2 { animation-delay: 0.4s; }
    .delay-3 { animation-delay: 0.6s; }

    /* ===== Header/Navbar ===== */
    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
      background-color: var(--white);
      box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
    }

    header.scrolled {
      padding: 10px 0;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
    }

    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 0;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-icon {
      width: 36px;
      height: 36px;
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      color: var(--white);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 18px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(30, 64, 175, 0.2);
    }

    .logo-text {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary);
      transition: all 0.3s ease;
    }

    .nav-links {
      display: flex;
      list-style: none;
      gap: 30px;
    }

    .nav-links a {
      font-weight: 500;
      position: relative;
      padding: 5px 0;
      transition: color 0.3s ease;
    }

    .nav-links a::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 3px;
      background: linear-gradient(to right, var(--primary), var(--secondary));
      transition: width 0.3s ease;
      border-radius: 2px;
    }

    .nav-links a:hover::after,
    .nav-links a.active::after {
      width: 100%;
    }

    .nav-links a.active {
      color: var(--primary);
      font-weight: 600;
    }

    .auth-buttons {
      display: flex;
      gap: 15px;
    }

    .login-btn {
      padding: 8px 20px;
      border-radius: 50px;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .login-btn:hover {
      color: var(--primary);
    }

    .signup-btn {
      padding: 8px 20px;
      border-radius: 50px;
      background: linear-gradient(to right, var(--primary), var(--primary-light));
      color: var(--white);
      font-weight: 500;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(30, 64, 175, 0.25);
    }

    .signup-btn:hover {
      background: linear-gradient(to right, var(--primary-dark), var(--primary));
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(30, 64, 175, 0.35);
    }

    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: var(--primary);
      cursor: pointer;
    }
    
    /* ===== Hero Section ===== */
    .hero {
      position: relative;
      padding: 190px 0 90px;
      background: linear-gradient(135deg, var(--primary), #004e92);
      color: var(--white);
      overflow: hidden;
      text-align: center;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxkZWZzPjxwYXR0ZXJuIGlkPSJwYXR0ZXJuIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIHBhdHRlcm5UcmFuc2Zvcm09InJvdGF0ZSg0NSkiPjxyZWN0IHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwwLjA1KSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3QgZmlsbD0idXJsKCNwYXR0ZXJuKSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIvPjwvc3ZnPg==');
    }

    .hero-content {
      position: relative;
      z-index: 1;
      max-width: 800px;
      margin: 0 auto;
    }

    .hero h1 {
      font-size: 3.2rem;
      margin-bottom: 20px;
      line-height: 1.2;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }

    .hero h1 span {
      color: var(--secondary);
      position: relative;
    }

    .hero h1 span::after {
      content: '';
      position: absolute;
      bottom: 5px;
      left: 0;
      width: 100%;
      height: 8px;
      background-color: rgba(255, 255, 255, 0.3);
      z-index: -1;
      border-radius: 4px;
    }

    .hero p {
      font-size: 1.2rem;
      margin-bottom: 40px;
      opacity: 0.9;
    }

    .hero-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
    }

    .hero .btn-secondary {
      background-color: transparent;
      color: var(--white);
      border-color: var(--white);
    }

    .hero .btn-secondary:hover {
      background-color: var(--white);
      color: var(--primary);
    }

    .floating-shape {
      position: absolute;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      z-index: 0;
      animation: float 6s ease-in-out infinite;
    }

    .shape-1 {
      width: 150px;
      height: 150px;
      top: 10%;
      left: 10%;
      animation-delay: 0s;
    }

    .shape-2 {
      width: 100px;
      height: 100px;
      bottom: 15%;
      right: 10%;
      animation-delay: 0.5s;
    }

    .shape-3 {
      width: 80px;
      height: 80px;
      top: 30%;
      right: 20%;
      animation-delay: 1s;
    }
    
    /* ===== Card Styles ===== */
    .card {
      background-color: var(--white);
      border-radius: 16px;
      padding: 30px;
      margin: 25px 0;
      box-shadow: var(--card-shadow);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 5px;
      height: 100%;
      background: linear-gradient(to bottom, var(--primary), var(--secondary));
      transition: width 0.3s ease;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: var(--hover-shadow);
    }
    
    .card:hover::before {
      width: 8px;
    }

    h2 {
      color: var(--primary);
      font-size: 1.8rem;
      margin-bottom: 20px;
      font-weight: 600;
    }

    h3 {
      color: var(--primary);
      font-size: 1.4rem;
      margin: 25px 0 15px;
      font-weight: 600;
      position: relative;
      padding-left: 15px;
    }
    
    h3::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 6px;
      height: 6px;
      background: var(--secondary);
      border-radius: 50%;
    }

    p {
      color: var(--text-light);
      margin-bottom: 20px;
      line-height: 1.7;
    }

    /* ===== Exercise Navigation ===== */
    .exercise-nav {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 30px 0;
      flex-wrap: wrap;
    }

    .exercise-btn {
      padding: 12px 24px;
      background: var(--white);
      color: var(--primary);
      border: 2px solid var(--primary);
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .exercise-btn.active {
      background: var(--primary);
      color: var(--white);
    }

    .exercise-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(30, 64, 175, 0.2);
    }

    .exercise-section {
      display: none;
    }

    .exercise-section.active {
      display: block;
    }

    /* ===== Step Buttons ===== */
    .step-buttons {
      display: flex;
      gap: 12px;
      margin: 20px 0;
      flex-wrap: wrap;
    }

    .step-btn {
      padding: 10px 16px;
      background: linear-gradient(to right, var(--primary), var(--primary-light));
      color: var(--white);
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
      box-shadow: 0 4px 8px rgba(30, 64, 175, 0.2);
    }

    .step-btn:hover {
      background: linear-gradient(to right, var(--primary-dark), var(--primary));
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(30, 64, 175, 0.3);
    }

    /* ===== Solution Display ===== */
    .solution {
      background: var(--gray-light);
      border-left: 4px solid var(--secondary);
      padding: 20px;
      margin: 15px 0;
      border-radius: 0 8px 8px 0;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .solution::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.5), transparent);
      transform: translateX(-100%);
    }
    
    .solution.active::before {
      animation: shimmer 1.5s ease;
    }

    /* ===== Progress Bar ===== */
    .progress-container {
      width: 100%;
      height: 8px;
      background-color: var(--gray);
      border-radius: 4px;
      margin: 20px 0;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(to right, var(--primary), var(--secondary));
      border-radius: 4px;
      width: 0%;
      transition: width 1s ease;
    }

    /* ===== Graph Styles ===== */
    .graph-container {
      height: 300px;
      margin: 15px 0;
      background: var(--white);
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
      position: relative;
    }

    .graph {
      width: 100%;
      height: 100%;
      position: relative;
    }

    .graph-axes {
      position: absolute;
      background-color: #64748b;
    }

    .graph-axes.x-axis {
      width: 100%;
      height: 2px;
      top: 50%;
      left: 0;
    }

    .graph-axes.y-axis {
      width: 2px;
      height: 100%;
      top: 0;
      left: 50%;
    }

    .graph-ellipse {
      position: absolute;
      border: 2px solid var(--primary);
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80%;
      height: 60%;
    }

    .graph-center {
      position: absolute;
      width: 8px;
      height: 8px;
      background-color: var(--primary);
      border-radius: 50%;
      transform: translate(-50%, -50%);
    }

    .graph-vertex {
      position: absolute;
      width: 10px;
      height: 10px;
      background-color: var(--accent);
      border-radius: 50%;
      transform: translate(-50%, -50%);
    }

    .graph-focus {
      position: absolute;
      width: 8px;
      height: 8px;
      background-color: var(--secondary);
      border-radius: 50%;
      transform: translate(-50%, -50%);
    }

    /* ===== Self-Care Notes ===== */
    .self-care {
      background: linear-gradient(135deg, #e0f2fe, #f0f9ff);
      border-radius: 12px;
      padding: 20px;
      margin: 25px 0;
      text-align: center;
      border-left: 5px solid var(--accent);
      animation: pulse 3s infinite;
    }

    .self-care h4 {
      color: var(--accent);
      margin-bottom: 10px;
      font-size: 1.3rem;
    }

    .self-care p {
      color: var(--text);
      font-size: 1.1rem;
      margin-bottom: 0;
    }

    /* ===== Visual Elements ===== */
    .math-emoji {
      font-size: 2rem;
      margin: 0 10px;
      animation: float 3s ease-in-out infinite;
    }

    .visual-element {
      text-align: center;
      margin: 20px 0;
    }

    .emoji-row {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 15px 0;
    }

    /* ===== Resources Section ===== */
    .resources {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin: 20px 0;
    }

    .resource-card {
      flex: 1;
      min-width: 200px;
      background: var(--white);
      padding: 15px;
      border-radius: 10px;
      box-shadow: var(--card-shadow);
      text-align: center;
      transition: transform 0.3s;
    }

    .resource-card:hover {
      transform: translateY(-5px);
    }

    .resource-card a {
      display: block;
      margin: 10px 0;
      padding: 10px;
      background: var(--primary);
      color: var(--white);
      text-decoration: none;
      border-radius: 5px;
      transition: background 0.3s;
    }

    .resource-card a:hover {
      background: var(--primary-dark);
    }

    /* ===== Completion Message ===== */
    .completion {
      text-align: center;
      padding: 30px;
      background: linear-gradient(135deg, #dbeafe, #e0f2fe);
      border-radius: 16px;
      margin: 30px 0;
      animation: fadeIn 1s ease;
    }

    .completion h3 {
      color: var(--primary);
      font-size: 1.8rem;
      margin-bottom: 15px;
    }

    .completion p {
      font-size: 1.1rem;
      color: var(--text);
    }

    /* ===== Circle Geometry Specific Styles ===== */
    .definition {
      background: #f3fbff;
      border-left: 6px solid var(--primary);
      padding: 12px;
      border-radius: 8px;
      margin-top: 10px;
    }

    .controls {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .example {
      background: #fff;
      padding: 12px;
      border-radius: 10px;
      margin-top: 12px;
      border-left: 6px solid #bfe9ff;
    }

    .big {
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 6px;
    }

    .step-block {
      margin-top: 10px;
    }

    .step-line {
      display: none;
      padding: 10px;
      border-radius: 8px;
      background: #f7fbff;
      margin-top: 8px;
      border-left: 4px solid #d6eefc;
    }

    .next-step {
      margin-top: 8px;
      background: var(--primary);
      color: white;
      padding: 8px 10px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
    }

    input[type="text"] {
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #d9ecff;
      width: 100%;
      font-size: 15px;
    }

    .row {
      display: flex;
      gap: 10px;
      align-items: center;
      margin-top: 8px;
      flex-wrap: wrap;
    }

    button.check {
      background: var(--primary);
      color: white;
      border: none;
      padding: 10px 14px;
      border-radius: 8px;
      cursor: pointer;
    }

    .result {
      margin-top: 8px;
      padding: 10px;
      border-radius: 8px;
      display: none;
    }

    .result.good {
      background: #e6fff0;
      border-left: 4px solid #2fb46a;
    }

    .result.warn {
      background: #fff7e6;
      border-left: 4px solid #ffb74d;
    }

    .divider {
      background: linear-gradient(90deg, var(--primary), var(--primary-light));
      color: white;
      padding: 10px 14px;
      border-radius: 10px;
      margin: 18px 0;
      font-weight: 700;
      box-shadow: 0 6px 18px rgba(3, 102, 214, 0.08);
      text-align: center;
    }

    .small-note {
      font-size: 13px;
      color: var(--text-light);
      margin-top: 6px;
    }

    .scenario {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-around;
      padding: 12px;
    }

    .scenario .card-mini {
      background: white;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 6px 16px rgba(3, 102, 214, 0.04);
      width: 30%;
      min-width: 200px;
      text-align: center;
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .scenario .card-mini:hover {
      transform: translateY(-5px);
    }

    .scenario .icon {
      font-size: 48px;
      margin-bottom: 8px;
    }

    .scenario .explain {
      display: none;
      margin-top: 8px;
      text-align: left;
    }

    .show-explain {
      display: block;
      padding: 10px;
      border-radius: 8px;
      background: #f2fbff;
      border-left: 4px solid #cfeeff;
      margin-top: 8px;
    }

    .question-box {
      background: #f0f9ff;
      border-radius: 10px;
      padding: 15px;
      margin: 15px 0;
      border-left: 5px solid var(--primary);
    }

    .question-text {
      font-weight: 600;
      margin-bottom: 10px;
      color: #0b4a8a;
    }

    .try-yourself {
      background: #f9f7ff;
      border-radius: 10px;
      padding: 15px;
      margin: 15px 0;
      border: 2px dashed #a5d8ff;
    }

    .try-title {
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .formula-box {
      background: #f8f5ff;
      border-radius: 8px;
      padding: 12px;
      margin: 10px 0;
      border-left: 4px solid #9d7bff;
      font-family: 'Courier New', monospace;
    }

    .example-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 15px;
      margin-top: 15px;
    }

    .example-box {
      background: #f7fbff;
      border-radius: 10px;
      padding: 15px;
      border: 2px solid #e1f0ff;
    }

    /* ===== Game Link ===== */
    .game-link {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      margin-top: 15px;
      padding: 12px 25px;
      background: linear-gradient(to right, var(--success), #0da271);
      color: var(--white);
      border-radius: 10px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(16, 185, 129, 0.3);
    }

    .game-link:hover {
      background: linear-gradient(to right, #0da271, var(--success));
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(16, 185, 129, 0.4);
    }

    /* ===== Footer ===== */
    .footer {
      background: linear-gradient(to bottom, var(--primary-dark), #0f172a);
      color: var(--white);
      padding: 80px 0 30px;
      position: relative;
    }

    .footer::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 10px;
      background: linear-gradient(90deg, var(--secondary), var(--primary));
    }

    .footer-content {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 40px;
      margin-bottom: 60px;
    }

    .footer-about {
      grid-column: span 2;
    }

    .footer-logo {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .footer-logo-icon {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, var(--white), var(--gray));
      color: var(--primary);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 1.2rem;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .footer-about p {
      opacity: 0.8;
      margin-bottom: 25px;
      line-height: 1.7;
    }

    .social-links {
      display: flex;
      gap: 15px;
    }

    .social-link {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .social-link:hover {
      background: linear-gradient(135deg, var(--secondary), var(--accent));
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(245, 158, 11, 0.3);
    }

    .footer-links h3 {
      font-size: 1.2rem;
      margin-bottom: 25px;
      position: relative;
      padding-bottom: 10px;
      color: var(--white);
    }

    .footer-links h3::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 40px;
      height: 3px;
      background: linear-gradient(to right, var(--secondary), var(--accent));
    }

    .footer-links ul {
      list-style: none;
    }

    .footer-links li {
      margin-bottom: 12px;
    }

    .footer-links a {
      opacity: 0.8;
      transition: all 0.3s ease;
      position: relative;
      padding-left: 15px;
    }

    .footer-links a::before {
      content: '‚Üí';
      position: absolute;
      left: 0;
      opacity: 0;
      transition: all 0.3s ease;
    }

    .footer-links a:hover {
      opacity: 1;
      padding-left: 20px;
    }

    .footer-links a:hover::before {
      opacity: 1;
      left: -5px;
    }

    .footer-bottom {
      text-align: center;
      padding-top: 30px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .footer-bottom p {
      opacity: 0.7;
      margin-bottom: 20px;
    }

    .footer-tags {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .tag {
      background-color: rgba(255, 255, 255, 0.1);
      padding: 5px 15px;
      border-radius: 50px;
      font-size: 0.9rem;
      transition: all 0.3s ease;
    }

    .tag:hover {
      background: linear-gradient(to right, var(--secondary), var(--accent));
      color: var(--text);
      transform: translateY(-2px);
    }
    
    /* ===== Floating Action Button ===== */
    .fab {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      color: var(--white);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      box-shadow: 0 6px 15px rgba(30, 64, 175, 0.3);
      cursor: pointer;
      z-index: 999;
      transition: all 0.3s ease;
      animation: pulse 2s infinite;
    }
    
    .fab:hover {
      transform: scale(1.1) rotate(90deg);
      box-shadow: 0 8px 20px rgba(30, 64, 175, 0.4);
    }

    /* ===== Sound Toggle ===== */
    .sound-toggle {
      position: fixed;
      bottom: 30px;
      left: 30px;
      background: var(--white);
      border: none;
      border-radius: 50px;
      padding: 12px 20px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      z-index: 999;
      transition: all 0.3s ease;
    }

    .sound-toggle:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    }

    .sound-toggle.sound-muted {
      opacity: 0.7;
    }

    /* ===== Responsive Styles ===== */
    @media (max-width: 992px) {
      .nav-links {
        gap: 20px;
      }
      
      .footer-content {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .footer-about {
        grid-column: span 2;
      }
      
      .scenario .card-mini {
        width: 45%;
      }
    }

    @media (max-width: 768px) {
      .navbar {
        padding: 15px 0;
      }
      
      .nav-links {
        display: none;
      }
      
      .mobile-menu-btn {
        display: block;
      }
      
      .hero h1 {
        font-size: 2.5rem;
      }
      
      .hero-buttons {
        flex-direction: column;
        gap: 15px;
      }
      
      .footer-content {
        grid-template-columns: 1fr;
      }
      
      .footer-about {
        grid-column: span 1;
      }
      
      .scenario .card-mini {
        width: 100%;
      }
    }

    @media (max-width: 576px) {
      .section-title h2 {
        font-size: 2rem;
      }
      
      .hero {
        padding: 150px 0 80px;
      }
      
      .hero h1 {
        font-size: 2rem;
      }
      
      .hero p {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation Bar -->
  <header id="header">
    <div class="container">
      <nav class="navbar">
        <a href="#" class="logo">
          <div class="logo-icon">S</div>
          <span class="logo-text">Sentellect</span>
        </a>
        
        <ul class="nav-links">
          <li><a href="#" class="active">Home</a></li>
          <li><a href="#exercise-6.1">6.1 Circles</a></li>
          <li><a href="#exercise-6.2">6.2 Tangents</a></li>
          <li><a href="#exercise-6.3">6.3 Properties</a></li>
          <li><a href="#exercise-6.4">6.4 Ellipses</a></li>
          <li><a href="#exercise-6.5">6.5 Applications</a></li>
        </ul>
        
        <div class="auth-buttons">
          <a href="#" class="login-btn">Login</a>
          <a href="#" class="signup-btn">Sign Up</a>
        </div>
        
        <button class="mobile-menu-btn">
          <i class="fas fa-bars"></i>
        </button>
      </nav>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <div class="floating-shape shape-1"></div>
    <div class="floating-shape shape-2"></div>
    <div class="floating-shape shape-3"></div>
    
    <div class="container">
      <div class="hero-content">
        <h1 class="animate">Conic Sections <span>Complete Guide</span></h1>
        <p class="animate delay-1">Master circles, tangents, normals, ellipses, and conic sections with interactive examples and stress-free learning</p>
        <div class="hero-buttons">
          <a href="#exercise-6.1" class="btn btn-primary animate delay-2">Start Learning</a>
          <a href="#resources" class="btn btn-secondary animate delay-3">Resources</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Exercise Navigation -->
  <div class="container">
    <div class="exercise-nav">
      <button class="exercise-btn active" onclick="showExercise('exercise-6.1')">6.1 Circles</button>
      <button class="exercise-btn" onclick="showExercise('exercise-6.2')">6.2 Tangents</button>
      <button class="exercise-btn" onclick="showExercise('exercise-6.3')">6.3 Properties</button>
      <button class="exercise-btn" onclick="showExercise('exercise-6.4')">6.4 Ellipses</button>
      <button class="exercise-btn" onclick="showExercise('exercise-6.5')">6.5 Applications</button>
    </div>
  </div>

  <!-- Main Content -->
  <div class="container">
    
    <!-- Exercise 6.1: Circles -->
    <section id="exercise-6.1" class="exercise-section active">
      <!-- Welcome -->
      <div class="card animate">
        <h2>Welcome to Conic Sections: Circles (Chapter 6.1)</h2>
        <p class="lead">Learn about circle equations, finding centers and radii, and solving problems involving tangents and circle intersections.</p>
        <div class="small-note">Based on FSc Part 2 Mathematics - Punjab Textbook Board</div>
      </div>

      <!-- Standard Form of Circle Equation -->
      <div class="divider" id="standard-form">Standard Form of Circle Equation</div>
      <section class="card animate delay-1">
        <h2>Finding Center and Radius from General Equation</h2>
        <p class="lead">Learn how to convert the general form of a circle equation to standard form to identify its center and radius.</p>
        
        <div class="scenario">
          <div class="card-mini" onclick="toggleScenario('circle','complete')">
            <div class="icon">üß©</div>
            <div style="font-weight:700">Completing Square</div>
            <div class="explain" id="circle-complete">
              <div class="show-explain">
                <b>Key technique:</b> We use the method of completing the square to convert from general form to standard form.
              </div>
            </div>
          </div>
          <div class="card-mini" onclick="toggleScenario('circle','pattern')">
            <div class="icon">üîç</div>
            <div style="font-weight:700">Pattern Recognition</div>
            <div class="explain" id="circle-pattern">
              <div class="show-explain">
                <b>Remember:</b> The standard form (x-h)¬≤ + (y-k)¬≤ = r¬≤ immediately reveals the center (h,k) and radius r.
              </div>
            </div>
          </div>
          <div class="card-mini" onclick="toggleScenario('circle','visual')">
            <div class="icon">üìê</div>
            <div style="font-weight:700">Visualization</div>
            <div class="explain" id="circle-visual">
              <div class="show-explain">
                <b>Helpful tip:</b> Once you have center and radius, you can easily sketch the circle on a coordinate plane.
              </div>
            </div>
          </div>
        </div>

        <div class="definition">
          <b>Standard Form of Circle:</b> \((x - h)^2 + (y - k)^2 = r^2\)
          <br>Where (h,k) is the center and r is the radius
          <br><b>General Form:</b> \(x^2 + y^2 + 2gx + 2fy + c = 0\)
          <br>Where center = (-g, -f) and radius = \(\sqrt{g^2 + f^2 - c}\)
        </div>

        <div class="example-container">
          <div class="example-box">
            <div class="big">Example 1: x¬≤ + y¬≤ + 12x - 10y = 0</div>
            <div class="controls">
              <button class="step-btn" onclick="startSteps('circle1')">Show Steps</button>
            </div>
            <div class="step-block" id="circle1">
              <div class="step-line" id="circle1_step1"><b>Step 1:</b> Group x and y terms: (x¬≤ + 12x) + (y¬≤ - 10y) = 0</div>
              <div class="step-line" id="circle1_step2"><b>Step 2:</b> Complete the square for x: x¬≤ + 12x = (x + 6)¬≤ - 36</div>
              <div class="step-line" id="circle1_step3"><b>Step 3:</b> Complete the square for y: y¬≤ - 10y = (y - 5)¬≤ - 25</div>
              <div class="step-line" id="circle1_step4"><b>Step 4:</b> Substitute back: (x + 6)¬≤ - 36 + (y - 5)¬≤ - 25 = 0</div>
              <div class="step-line" id="circle1_step5"><b>Step 5:</b> Simplify: (x + 6)¬≤ + (y - 5)¬≤ = 61</div>
              <div class="step-line" id="circle1_step6"><b>Step 6:</b> Center = (-6, 5), Radius = ‚àö61</div>
              <div style="margin-top:8px">
                <button class="next-step" onclick="nextStep('circle1')">Next Step</button>
              </div>
            </div>
            <div class="graph-container">
              <div class="graph" id="circle1-visual">
                <!-- Graph will be drawn here by JavaScript -->
              </div>
            </div>
          </div>

          <div class="example-box">
            <div class="big">Example 2: 5x¬≤ + 5y¬≤ + 14x + 12y - 10 = 0</div>
            <div class="controls">
              <button class="step-btn" onclick="startSteps('circle2')">Show Steps</button>
            </div>
            <div class="step-block" id="circle2">
              <div class="step-line" id="circle2_step1"><b>Step 1:</b> Divide by 5: x¬≤ + y¬≤ + (14/5)x + (12/5)y - 2 = 0</div>
              <div class="step-line" id="circle2_step2"><b>Step 2:</b> Group terms: (x¬≤ + (14/5)x) + (y¬≤ + (12/5)y) = 2</div>
              <div class="step-line" id="circle2_step3"><b>Step 3:</b> Complete square for x: x¬≤ + (14/5)x = (x + 7/5)¬≤ - (49/25)</div>
              <div class="step-line" id="circle2_step4"><b>Step 4:</b> Complete square for y: y¬≤ + (12/5)y = (y + 6/5)¬≤ - (36/25)</div>
              <div class="step-line" id="circle2_step5"><b>Step 5:</b> Substitute: (x + 7/5)¬≤ - 49/25 + (y + 6/5)¬≤ - 36/25 = 2</div>
              <div class="step-line" id="circle2_step6"><b>Step 6:</b> Simplify: (x + 7/5)¬≤ + (y + 6/5)¬≤ = 2 + 49/25 + 36/25 = 135/25</div>
              <div class="step-line" id="circle2_step7"><b>Step 7:</b> Center = (-7/5, -6/5), Radius = ‚àö(135/25) = (3‚àö15)/5</div>
              <div style="margin-top:8px">
                <button class="next-step" onclick="nextStep('circle2')">Next Step</button>
              </div>
            </div>
            <div class="graph-container">
              <div class="graph" id="circle2-visual">
                <!-- Graph will be drawn here by JavaScript -->
              </div>
            </div>
          </div>
        </div>

        <div class="try-yourself">
          <div class="try-title">‚ú® Try It Yourself</div>
          <p>1. Find center and radius of: x¬≤ + y¬≤ - 8x + 6y + 9 = 0</p>
          <div class="row">
            <input id="tcircle1" placeholder="Type as (h,k), r">
            <button class="check" onclick="checkTextMotivate('tcircle1','(4,-3), 4','tcircle1_res')">Check</button>
          </div>
          <div id="tcircle1_res" class="result"></div>
          
          <p>2. What does (x-2)¬≤ + (y+1)¬≤ = -5 represent?</p>
          <div class="row">
            <input id="tcircle2" placeholder="Type your answer">
            <button class="check" onclick="checkTextMotivate('tcircle2','no real circle','tcircle2_res')">Check</button>
          </div>
          <div id="tcircle2_res" class="result"></div>
        </div>

        <div class="self-care">
          <h4>üíñ Mindful Learning Break üíñ</h4>
          <p>Remember that completing the square is like solving a puzzle - take your time and enjoy the process! üåü</p>
        </div>
      </section>

      <!-- Circle Through Three Points -->
      <div class="divider" id="three-points">Circle Through Three Points</div>
      <section class="card animate delay-2">
        <h2>Finding Circle Equation Through Three Points</h2>
        <p class="lead">Learn how to determine the unique circle that passes through three non-collinear points.</p>
        
        <div class="scenario">
          <div class="card-mini" onclick="toggleScenario('three','system')">
            <div class="icon">‚öôÔ∏è</div>
            <div style="font-weight:700">System of Equations</div>
            <div class="explain" id="three-system">
              <div class="show-explain">
                <b>Method:</b> We substitute each point into the general circle equation to create a system of three equations.
              </div>
            </div>
          </div>
          <div class="card-mini" onclick="toggleScenario('three','perpendicular')">
            <div class="icon">üìè</div>
            <div style="font-weight:700">Perpendicular Bisectors</div>
            <div class="explain" id="three-perpendicular">
              <div class="show-explain">
                <b>Geometric approach:</b> The center is the intersection point of perpendicular bisectors of chords formed by the points.
              </div>
            </div>
          </div>
          <div class="card-mini" onclick="toggleScenario('three','determinant')">
            <div class="icon">üßÆ</div>
            <div style="font-weight:700">Determinant Method</div>
            <div class="explain" id="three-determinant">
              <div class="show-explain">
                <b>Advanced technique:</b> For points (x‚ÇÅ,y‚ÇÅ), (x‚ÇÇ,y‚ÇÇ), (x‚ÇÉ,y‚ÇÉ), we can use a determinant formula to find the circle.
              </div>
            </div>
          </div>
        </div>

        <div class="definition">
          <b>General Approach:</b>
          <br>1. Start with general form: x¬≤ + y¬≤ + 2gx + 2fy + c = 0
          <br>2. Substitute each point to get three equations
          <br>3. Solve the system for g, f, and c
          <br>4. Convert to standard form: (x + g)¬≤ + (y + f)¬≤ = g¬≤ + f¬≤ - c
        </div>

        <div class="example-container">
          <div class="example-box">
            <div class="big">Example: Points A(4,5), B(-4,-3), C(8,-3)</div>
            <div class="controls">
              <button class="step-btn" onclick="startSteps('three1')">Show Solution</button>
            </div>
            <div class="step-block" id="three1">
              <div class="step-line" id="three1_step1"><b>Step 1:</b> General form: x¬≤ + y¬≤ + 2gx + 2fy + c = 0</div>
              <div class="step-line" id="three1_step2"><b>Step 2:</b> For A(4,5): 16 + 25 + 8g + 10f + c = 0 ‚Üí 8g + 10f + c = -41</div>
              <div class="step-line" id="three1_step3"><b>Step 3:</b> For B(-4,-3): 16 + 9 - 8g - 6f + c = 0 ‚Üí -8g - 6f + c = -25</div>
              <div class="step-line" id="three1_step4"><b>Step 4:</b> For C(8,-3): 64 + 9 + 16g - 6f + c = 0 ‚Üí 16g - 6f + c = -73</div>
              <div class="step-line" id="three1_step5"><b>Step 5:</b> Solve the system:
                <br>From equations 1 and 2: (8g+10f+c) - (-8g-6f+c) = -41 - (-25) ‚Üí 16g + 16f = -16 ‚Üí g + f = -1
                <br>From equations 1 and 3: (8g+10f+c) - (16g-6f+c) = -41 - (-73) ‚Üí -8g + 16f = 32 ‚Üí -g + 2f = 4
              </div>
              <div class="step-line" id="three1_step6"><b>Step 6:</b> Solve: g + f = -1 and -g + 2f = 4
                <br>Add: 3f = 3 ‚Üí f = 1, then g = -2
                <br>Substitute in first equation: 8(-2) + 10(1) + c = -41 ‚Üí -16 + 10 + c = -41 ‚Üí c = -35
              </div>
              <div class="step-line" id="three1_step7"><b>Step 7:</b> Equation: x¬≤ + y¬≤ - 4x + 2y - 35 = 0
                <br>Standard form: (x - 2)¬≤ + (y + 1)¬≤ = 40
                <br>Center = (2, -1), Radius = ‚àö40 = 2‚àö10
              </div>
              <div style="margin-top:8px">
                <button class="next-step" onclick="nextStep('three1')">Next Step</button>
              </div>
            </div>
            <div class="graph-container">
              <div class="graph" id="three1-visual">
                <!-- Graph will be drawn here by JavaScript -->
              </div>
            </div>
          </div>
        </div>

        <div class="try-yourself">
          <div class="try-title">‚ú® Try It Yourself</div>
          <p>1. How many circles pass through three collinear points?</p>
          <div class="row">
            <input id="tthree1" placeholder="Type a number">
            <button class="check" onclick="checkTextMotivate('tthree1','0','tthree1_res')">Check</button>
          </div>
          <div id="tthree1_res" class="result"></div>
          
          <p>2. For points (0,0), (2,0), (0,2), what is the center of the circle?</p>
          <div class="row">
            <input id="tthree2" placeholder="Type as (x,y)">
            <button class="check" onclick="checkTextMotivate('tthree2','(1,1)','tthree2_res')">Check</button>
          </div>
          <div id="tthree2_res" class="result"></div>
        </div>

        <div class="self-care">
          <h4>üåà Progress Checkpoint üåà</h4>
          <p>You're learning to find unique geometric shapes from given conditions - this is powerful mathematical thinking! üß†‚ú®</p>
        </div>
      </section>

      <!-- Completion Message -->
      <div class="self-care animate" style="margin-top:40px">
        <h3>üéâ Incredible Work! üéâ</h3>
        <p>You've completed the Circles chapter! You now understand circle equations, centers, radii, and how to find circles through given points.</p>
        <p>üåü <strong>Your geometric intuition and problem-solving skills are growing impressively!</strong> üåü</p>
        <div class="emoji-row">
          <span class="math-emoji">ü•≥</span>
          <span class="math-emoji">üéä</span>
          <span class="math-emoji">üëè</span>
          <span class="math-emoji">üí´</span>
          <span class="math-emoji">üåà</span>
        </div>
      </div>
    </section>

    <!-- Exercise 6.2: Tangents and Normals -->
    <section id="exercise-6.2" class="exercise-section">
      <!-- Welcome -->
      <div class="card animate">
        <h2>Welcome to Tangents and Normals to Circles (Chapter 6.2)</h2>
        <p class="lead">Learn about tangent lines, normals, point positions relative to circles, and solving intersection problems.</p>
        <div class="small-note">Based on FSc Part 2 Mathematics - Punjab Textbook Board</div>
      </div>

      <!-- Key Formulas Section -->
      <div class="divider">Key Formulas</div>
      <section class="card animate delay-1">
        <h2>Essential Circle Formulas</h2>
        
        <div class="formula-box">
          <b>Tangent at point (x‚ÇÅ, y‚ÇÅ) on circle x¬≤ + y¬≤ = r¬≤:</b><br>
          xx‚ÇÅ + yy‚ÇÅ = r¬≤
        </div>
        
        <div class="formula-box">
          <b>Tangent at point (x‚ÇÅ, y‚ÇÅ) on circle x¬≤ + y¬≤ + 2gx + 2fy + c = 0:</b><br>
          xx‚ÇÅ + yy‚ÇÅ + g(x + x‚ÇÅ) + f(y + y‚ÇÅ) + c = 0
        </div>
        
        <div class="formula-box">
          <b>Length of tangent from (x‚ÇÅ, y‚ÇÅ) to circle x¬≤ + y¬≤ + 2gx + 2fy + c = 0:</b><br>
          ‚àö(x‚ÇÅ¬≤ + y‚ÇÅ¬≤ + 2gx‚ÇÅ + 2fy‚ÇÅ + c)
        </div>
        
        <div class="formula-box">
          <b>Condition for line y = mx + c to be tangent to circle x¬≤ + y¬≤ = r¬≤:</b><br>
          c¬≤ = r¬≤(1 + m¬≤)
        </div>
        
        <div class="formula-box">
          <b>Point position relative to circle:</b><br>
          ‚Ä¢ Inside: x‚ÇÅ¬≤ + y‚ÇÅ¬≤ + 2gx‚ÇÅ + 2fy‚ÇÅ + c < 0<br>
          ‚Ä¢ On: x‚ÇÅ¬≤ + y‚ÇÅ¬≤ + 2gx‚ÇÅ + 2fy‚ÇÅ + c = 0<br>
          ‚Ä¢ Outside: x‚ÇÅ¬≤ + y‚ÇÅ¬≤ + 2gx‚ÇÅ + 2fy‚ÇÅ + c > 0
        </div>
      </section>

      <!-- Tangents and Normals -->
      <div class="divider" id="tangent-normal">Tangents and Normals</div>
      <section class="card animate delay-1">
        <h2>Finding Equations of Tangents and Normals</h2>
        <p class="lead">Learn how to find equations of tangent and normal lines to circles at given points.</p>
        
        <div class="scenario">
          <div class="card-mini" onclick="toggleScenario('tan','tangent')">
            <div class="icon">üìê</div>
            <div style="font-weight:700">Tangent Line</div>
            <div class="explain" id="tan-tangent">
              <div class="show-explain">
                <b>Definition:</b> A line that touches the circle at exactly one point, perpendicular to the radius at that point.
              </div>
            </div>
          </div>
          <div class="card-mini" onclick="toggleScenario('tan','normal')">
            <div class="icon">üìè</div>
            <div style="font-weight:700">Normal Line</div>
            <div class="explain" id="tan-normal">
              <div class="show-explain">
                <b>Definition:</b> A line perpendicular to the tangent at the point of contact, passing through the center.
              </div>
            </div>
          </div>
          <div class="card-mini" onclick="toggleScenario('tan','formula')">
            <div class="icon">üßÆ</div>
            <div style="font-weight:700">Formula Method</div>
            <div class="explain" id="tan-formula">
              <div class="show-explain">
                <b>Key formula:</b> For circle x¬≤ + y¬≤ = r¬≤, tangent at (x‚ÇÅ,y‚ÇÅ) is xx‚ÇÅ + yy‚ÇÅ = r¬≤
              </div>
            </div>
          </div>
        </div>

        <div class="definition">
          <b>Important Properties:</b>
          <br>1. Tangent is perpendicular to radius at point of contact
          <br>2. Normal passes through center and point of contact
          <br>3. From external point, two tangents can be drawn to a circle
          <br>4. Tangents from external point are equal in length
        </div>

        <div class="example-container">
          <div class="example-box">
            <div class="big">Problem 1: Tangent and normal to x¬≤ + y¬≤ = 25 at (4,3)</div>
            <div class="controls">
              <button class="step-btn" onclick="startSteps('tan1')">Show Solution</button>
            </div>
            <div class="step-block" id="tan1">
              <div class="step-line" id="tan1_step1"><b>Step 1:</b> Verify point lies on circle: 4¬≤ + 3¬≤ = 16 + 9 = 25 ‚úì</div>
              <div class="step-line" id="tan1_step2"><b>Step 2:</b> Equation of tangent: xx‚ÇÅ + yy‚ÇÅ = r¬≤ ‚Üí 4x + 3y = 25</div>
              <div class="step-line" id="tan1_step3"><b>Step 3:</b> Slope of tangent: From 4x + 3y = 25 ‚Üí y = (-4/3)x + 25/3, slope = -4/3</div>
              <div class="step-line" id="tan1_step4"><b>Step 4:</b> Slope of radius: From center (0,0) to (4,3) ‚Üí slope = 3/4</div>
              <div class="step-line" id="tan1_step5"><b>Step 5:</b> Slope of normal = negative reciprocal of tangent slope = 3/4</div>
              <div class="step-line" id="tan1_step6"><b>Step 6:</b> Equation of normal: y - 3 = (3/4)(x - 4) ‚Üí 3x - 4y = 0</div>
              <div style="margin-top:8px">
                <button class="next-step" onclick="nextStep('tan1')">Next Step</button>
              </div>
            </div>
            <div class="graph-container">
              <div class="graph" id="tan1-visual">
                <!-- Graph will be drawn here by JavaScript -->
              </div>
            </div>
          </div>
        </div>

        <div class="try-yourself">
          <div class="try-title">‚ú® Try It Yourself</div>
          <p>1. What is the tangent to x¬≤ + y¬≤ = 10 at (3,1)?</p>
          <div class="row">
            <input id="ttan1" placeholder="Type equation">
            <button class="check" onclick="checkTextMotivate('ttan1','3x+y=10','ttan1_res')">Check</button>
          </div>
          <div id="ttan1_res" class="result"></div>
          
          <p>2. The normal to a circle always passes through _____</p>
          <div class="row">
            <input id="ttan2" placeholder="Type your answer">
            <button class="check" onclick="checkTextMotivate('ttan2','the center','ttan2_res')">Check</button>
          </div>
          <div id="ttan2_res" class="result"></div>
        </div>

        <div class="self-care">
          <h4>üíñ Mindful Learning Break üíñ</h4>
          <p>Remember that tangents and normals create beautiful geometric relationships - enjoy discovering these patterns! üåü</p>
        </div>
      </section>

      <!-- Completion Message -->
      <div class="self-care animate" style="margin-top:40px">
        <h3>üéâ Incredible Work! üéâ</h3>
        <p>You've completed the Tangents and Normals chapter! You now understand how to find tangent and normal lines to circles.</p>
        <p>üåü <strong>Your geometric reasoning skills are growing impressively!</strong> üåü</p>
        <div class="emoji-row">
          <span class="math-emoji">ü•≥</span>
          <span class="math-emoji">üéä</span>
          <span class="math-emoji">üëè</span>
          <span class="math-emoji">üí´</span>
          <span class="math-emoji">üåà</span>
        </div>
      </div>
    </section>

    <!-- Exercise 6.3: Circle Properties -->
    <section id="exercise-6.3" class="exercise-section">
      <!-- Welcome -->
      <div class="card animate">
        <h2>Welcome to Circle Properties and Conic Sections (Chapter 6.3)</h2>
        <p class="lead">Explore fundamental properties of circles and get introduced to conic sections - parabola, ellipse, and hyperbola.</p>
        <div class="small-note">Based on FSc Part 2 Mathematics - Punjab Textbook Board</div>
      </div>

      <!-- Key Concepts Section -->
      <div class="divider">Key Concepts</div>
      <section class="card animate delay-1">
        <h2>Essential Circle Properties</h2>
        
        <div class="formula-box">
          <b>Normal to a Circle:</b><br>
          The normal at any point on a circle passes through the center of the circle.
        </div>
        
        <div class="formula-box">
          <b>Tangent and Radius:</b><br>
          The radius drawn to the point of tangency is perpendicular to the tangent line.
        </div>
        
        <div class="formula-box">
          <b>Right Triangle Circumcenter:</b><br>
          The midpoint of the hypotenuse of a right triangle is the circumcenter of the triangle.
        </div>
        
        <div class="formula-box">
          <b>Geometric Mean Property:</b><br>
          The perpendicular from a point on a circle to its diameter is the geometric mean between the segments of the diameter.
        </div>
        
        <div class="formula-box">
          <b>Conic Sections Definition:</b><br>
          A conic section is the set of all points P such that PF/PM = e (a constant), where F is a focus and PM is the distance to a directrix.
        </div>
      </section>

      <!-- Circle Properties -->
      <div class="divider" id="circle-properties">Circle Properties</div>
      <section class="card animate delay-1">
        <h2>Fundamental Properties of Circles</h2>
        <p class="lead">Explore and prove important geometric properties related to circles, tangents, and normals.</p>
        
        <div class="scenario">
          <div class="card-mini" onclick="toggleScenario('prop','normal')">
            <div class="icon">üìê</div>
            <div style="font-weight:700">Normal Property</div>
            <div class="explain" id="prop-normal">
              <div class="show-explain">
                <b>Property:</b> The normal at any point on a circle passes through the center.
              </div>
            </div>
          </div>
          <div class="card-mini" onclick="toggleScenario('prop','tangent')">
            <div class="icon">üìè</div>
            <div style="font-weight:700">Tangent Property</div>
            <div class="explain" id="prop-tangent">
              <div class="show-explain">
                <b>Property:</b> The radius to the point of tangency is perpendicular to the tangent.
              </div>
            </div>
          </div>
          <div class="card-mini" onclick="toggleScenario('prop','circumcenter')">
            <div class="icon">‚ñ≥</div>
            <div style="font-weight:700">Circumcenter</div>
            <div class="explain" id="prop-circumcenter">
              <div class="show-explain">
                <b>Property:</b> In a right triangle, the midpoint of the hypotenuse is the circumcenter.
              </div>
            </div>
          </div>
        </div>

        <div class="definition">
          <b>Important Geometric Relationships:</b>
          <br>1. Normal line passes through center of circle
          <br>2. Tangent is perpendicular to radius at point of contact
          <br>3. Right triangle's circumcenter is at midpoint of hypotenuse
          <br>4. Perpendicular from point on circle to diameter is geometric mean
        </div>

        <div class="example-container">
          <div class="example-box">
            <div class="big">Problem 1: Prove that normal lines of a circle pass through the centre of the circle.</div>
            <div class="controls">
              <button class="step-btn" onclick="startSteps('prop1')">Show Proof</button>
            </div>
            <div class="step-block" id="prop1">
              <div class="step-line" id="prop1_step1"><b>Step 1:</b> Consider a circle with center O and radius r.</div>
              <div class="step-line" id="prop1_step2"><b>Step 2:</b> Let P be any point on the circle, so OP = r.</div>
              <div class="step-line" id="prop1_step3"><b>Step 3:</b> The tangent at P is perpendicular to the radius OP.</div>
              <div class="step-line" id="prop1_step4"><b>Step 4:</b> The normal at P is perpendicular to the tangent at P.</div>
              <div class="step-line" id="prop1_step5"><b>Step 5:</b> Since both the radius and normal are perpendicular to the tangent at P, they must be collinear.</div>
              <div class="step-line" id="prop1_step6"><b>Step 6:</b> Therefore, the normal at P passes through the center O.</div>
              <div style="margin-top:8px">
                <button class="next-step" onclick="nextStep('prop1')">Next Step</button>
              </div>
            </div>
            <div class="graph-container">
              <div class="graph" id="prop1-visual">
                <!-- Graph will be drawn here by JavaScript -->
              </div>
            </div>
          </div>
        </div>

        <div class="try-yourself">
          <div class="try-title">‚ú® Try It Yourself</div>
          <p>1. In a circle, the normal at any point passes through _____</p>
          <div class="row">
            <input id="tprop1" placeholder="Type your answer">
            <button class="check" onclick="checkTextMotivate('tprop1','the center','tprop1_res')">Check</button>
          </div>
          <div id="tprop1_res" class="result"></div>
          
          <p>2. The altitude to the hypotenuse of a right triangle is the _____ between the segments of the hypotenuse.</p>
          <div class="row">
            <input id="tprop2" placeholder="Type your answer">
            <button class="check" onclick="checkTextMotivate('tprop2','geometric mean','tprop2_res')">Check</button>
          </div>
          <div id="tprop2_res" class="result"></div>
        </div>

        <div class="self-care">
          <h4>üíñ Mindful Learning Break üíñ</h4>
          <p>These geometric proofs reveal beautiful patterns in mathematics - enjoy discovering these elegant relationships! üåü</p>
        </div>
      </section>

      <!-- Completion Message -->
      <div class="self-care animate" style="margin-top:40px">
        <h3>üéâ Incredible Work! üéâ</h3>
        <p>You've completed the Circle Properties and Conic Sections chapter! You now understand fundamental circle properties and their proofs.</p>
        <p>üåü <strong>Your geometric reasoning and proof skills are growing impressively!</strong> üåü</p>
        <div class="emoji-row">
          <span class="math-emoji">ü•≥</span>
          <span class="math-emoji">üéä</span>
          <span class="math-emoji">üëè</span>
          <span class="math-emoji">üí´</span>
          <span class="math-emoji">üåà</span>
        </div>
      </div>
    </section>

    <!-- Exercise 6.4: Ellipses -->
    <section id="exercise-6.4" class="exercise-section">
      <!-- Welcome -->
      <div class="card animate">
        <h2>Welcome to Ellipses and Their Properties (Chapter 6.4)</h2>
        <p class="lead">Master the elements of ellipses, learn to write their equations, and explore fascinating real-world applications.</p>
        <div class="small-note">Based on FSc Part 2 Mathematics - Punjab Textbook Board</div>
      </div>

      <!-- Key Concepts Section -->
      <div class="divider">Key Concepts</div>
      <section class="card animate delay-1">
        <h2>Essential Ellipse Properties</h2>
        
        <div class="formula-box">
          <b>Standard Ellipse Forms:</b><br>
          ‚Ä¢ \(\frac{x^2}{a^2} + \frac{y^2}{b^2} = 1\) (horizontal major axis)<br>
          ‚Ä¢ \(\frac{x^2}{b^2} + \frac{y^2}{a^2} = 1\) (vertical major axis)
        </div>
        
        <div class="formula-box">
          <b>Key Elements:</b><br>
          ‚Ä¢ Foci: Two fixed points inside ellipse<br>
          ‚Ä¢ Vertices: Endpoints of major axis<br>
          ‚Ä¢ Center: Midpoint between foci<br>
          ‚Ä¢ Major Axis: Longer axis through foci<br>
          ‚Ä¢ Minor Axis: Shorter axis perpendicular to major axis
        </div>
        
        <div class="formula-box">
          <b>Fundamental Property:</b><br>
          For any point P on an ellipse: distance(P, F‚ÇÅ) + distance(P, F‚ÇÇ) = 2a
        </div>
        
        <div class="formula-box">
          <b>Important Relationships:</b><br>
          ‚Ä¢ \(c^2 = a^2 - b^2\) where c is distance from center to focus<br>
          ‚Ä¢ Eccentricity: \(e = \frac{c}{a}\) (0 < e < 1)<br>
          ‚Ä¢ Latus Rectum: \(\frac{2b^2}{a}\)
        </div>
      </section>

      <!-- Ellipse Elements -->
      <div class="divider" id="ellipse-elements">Ellipse Elements</div>
      <section class="card animate delay-1">
        <h2>Finding Center, Foci, Vertices and Eccentricity</h2>
        <p class="lead">Learn to identify key elements of ellipses from their equations and sketch their graphs.</p>
        
        <div class="scenario">
          <div class="card-mini" onclick="toggleScenario('elem','foci')">
            <div class="icon">üéØ</div>
            <div style="font-weight:700">Foci</div>
            <div class="explain" id="elem-foci">
              <div class="show-explain">
                <b>Definition:</b> Two fixed points inside ellipse; sum of distances from any point on ellipse to foci is constant.
              </div>
            </div>
          </div>
          <div class="card-mini" onclick="toggleScenario('elem','vertices')">
            <div class="icon">‚ñ≥</div>
            <div style="font-weight:700">Vertices</div>
            <div class="explain" id="elem-vertices">
              <div class="show-explain">
                <b>Definition:</b> Endpoints of major axis; farthest points from center on ellipse.
              </div>
            </div>
          </div>
          <div class="card-mini" onclick="toggleScenario('elem','center')">
            <div class="icon">‚óã</div>
            <div style="font-weight:700">Center</div>
            <div class="explain" id="elem-center">
              <div class="show-explain">
                <b>Definition:</b> Midpoint between foci and vertices; center of symmetry.
              </div>
            </div>
          </div>
        </div>

        <div class="definition">
          <b>Standard Form Relationships:</b>
          <br>‚Ä¢ For \(\frac{x^2}{a^2} + \frac{y^2}{b^2} = 1\): Center (0,0), Foci (¬±c,0), Vertices (¬±a,0)
          <br>‚Ä¢ For \(\frac{x^2}{b^2} + \frac{y^2}{a^2} = 1\): Center (0,0), Foci (0,¬±c), Vertices (0,¬±a)
          <br>‚Ä¢ \(c^2 = a^2 - b^2\) where a > b
        </div>

        <div class="example-container">
          <div class="example-box">
            <div class="big">Problem 1: Find center, foci, vertices and eccentricity of \(\frac{x^2}{16} + \frac{y^2}{9} = 1\)</div>
            <div class="controls">
              <button class="step-btn" onclick="startSteps('elem1')">Show Solution</button>
            </div>
            <div class="step-block" id="elem1">
              <div class="step-line" id="elem1_step1"><b>Step 1:</b> Compare with standard form \(\frac{x^2}{a^2} + \frac{y^2}{b^2} = 1\)</div>
              <div class="step-line" id="elem1_step2"><b>Step 2:</b> \(a^2 = 16\) ‚Üí \(a = 4\), \(b^2 = 9\) ‚Üí \(b = 3\)</div>
              <div class="step-line" id="elem1_step3"><b>Step 3:</b> Center = (0, 0)</div>
              <div class="step-line" id="elem1_step4"><b>Step 4:</b> \(c^2 = a^2 - b^2 = 16 - 9 = 7\) ‚Üí \(c = \sqrt{7}\)</div>
              <div class="step-line" id="elem1_step5"><b>Step 5:</b> Foci = (¬±‚àö7, 0)</div>
              <div class="step-line" id="elem1_step6"><b>Step 6:</b> Vertices = (¬±4, 0)</div>
              <div class="step-line" id="elem1_step7"><b>Step 7:</b> Eccentricity \(e = \frac{c}{a} = \frac{\sqrt{7}}{4}\)</div>
              <div style="margin-top:8px">
                <button class="next-step" onclick="nextStep('elem1')">Next Step</button>
              </div>
            </div>
            <div class="graph-container">
              <div class="graph" id="elem1-visual">
                <!-- Graph will be drawn here by JavaScript -->
              </div>
            </div>
          </div>

          <div class="example-box">
            <div class="big">Problem 2: Find center, foci, vertices and eccentricity of \(\frac{x^2}{9} + \frac{y^2}{25} = 1\)</div>
            <div class="controls">
              <button class="step-btn" onclick="startSteps('elem2')">Show Solution</button>
            </div>
            <div class="step-block" id="elem2">
              <div class="step-line" id="elem2_step1"><b>Step 1:</b> Compare with standard form \(\frac{x^2}{b^2} + \frac{y^2}{a^2} = 1\) (since a¬≤ > b¬≤)</div>
              <div class="step-line" id="elem2_step2"><b>Step 2:</b> \(a^2 = 25\) ‚Üí \(a = 5\), \(b^2 = 9\) ‚Üí \(b = 3\)</div>
              <div class="step-line" id="elem2_step3"><b>Step 3:</b> Center = (0, 0)</div>
              <div class="step-line" id="elem2_step4"><b>Step 4:</b> \(c^2 = a^2 - b^2 = 25 - 9 = 16\) ‚Üí \(c = 4\)</div>
              <div class="step-line" id="elem2_step5"><b>Step 5:</b> Foci = (0, ¬±4)</div>
              <div class="step-line" id="elem2_step6"><b>Step 6:</b> Vertices = (0, ¬±5)</div>
              <div class="step-line" id="elem2_step7"><b>Step 7:</b> Eccentricity \(e = \frac{c}{a} = \frac{4}{5}\)</div>
              <div style="margin-top:8px">
                <button class="next-step" onclick="nextStep('elem2')">Next Step</button>
              </div>
            </div>
            <div class="graph-container">
              <div class="graph" id="elem2-visual">
                <!-- Graph will be drawn here by JavaScript -->
              </div>
            </div>
          </div>
        </div>

        <div class="try-yourself">
          <div class="try-title">‚ú® Try It Yourself</div>
          <p>1. For ellipse \(\frac{x^2}{25} + \frac{y^2}{16} = 1\), what are the foci?</p>
          <div class="row">
            <input id="telem1" placeholder="Type coordinates (¬±x,y)">
            <button class="check" onclick="checkTextMotivate('telem1','(¬±3,0)','telem1_res')">Check</button>
          </div>
          <div id="telem1_res" class="result"></div>
          
          <p>2. For ellipse \(\frac{x^2}{9} + \frac{y^2}{36} = 1\), what is the eccentricity?</p>
          <div class="row">
            <input id="telem2" placeholder="Type value">
            <button class="check" onclick="checkTextMotivate('telem2','‚àö3/2','telem2_res')">Check</button>
          </div>
          <div id="telem2_res" class="result"></div>
        </div>

        <div class="self-care">
          <h4>üíñ Mindful Learning Break üíñ</h4>
          <p>Ellipses have beautiful symmetry - each point maintains a perfect balance between the two foci! üåü</p>
        </div>
      </section>

      <!-- Ellipse Equations -->
      <div class="divider" id="ellipse-equations">Ellipse Equations</div>
      <section class="card animate delay-2">
        <h2>Writing Ellipse Equations</h2>
        <p class="lead">Learn to write equations of ellipses given various combinations of foci, vertices, and other properties.</p>
        
        <div class="scenario">
          <div class="card-mini" onclick="toggleScenario('eq','foci-vertices')">
            <div class="icon">üéØ‚ñ≥</div>
            <div style="font-weight:700">Foci & Vertices</div>
            <div class="explain" id="eq-foci-vertices">
              <div class="show-explain">
                <b>Method:</b> Use relationship \(c^2 = a^2 - b^2\) to find missing parameter
              </div>
            </div>
          </div>
          <div class="card-mini" onclick="toggleScenario('eq','center-axes')">
            <div class="icon">‚óãüìè</div>
            <div style="font-weight:700">Center & Axes</div>
            <div class="explain" id="eq-center-axes">
              <div class="show-explain">
                <b>Method:</b> Use lengths of semi-major and semi-minor axes
              </div>
            </div>
          </div>
          <div class="card-mini" onclick="toggleScenario('eq','points')">
            <div class="icon">üìçüìç</div>
            <div style="font-weight:700">Points on Ellipse</div>
            <div class="explain" id="eq-points">
              <div class="show-explain">
                <b>Method:</b> Substitute points into general form and solve system
              </div>
            </div>
          </div>
        </div>

        <div class="example-container">
          <div class="example-box">
            <div class="big">Problem 1: Write equation with foci (¬±3, 0) and vertices (¬±5, 0)</div>
            <div class="controls">
              <button class="step-btn" onclick="startSteps('eq1')">Show Solution</button>
            </div>
            <div class="step-block" id="eq1">
              <div class="step-line" id="eq1_step1"><b>Step 1:</b> Foci are horizontal, so major axis is horizontal</div>
              <div class="step-line" id="eq1_step2"><b>Step 2:</b> Center is midpoint between foci: (0, 0)</div>
              <div class="step-line" id="eq1_step3"><b>Step 3:</b> Distance from center to focus: c = 3</div>
              <div class="step-line" id="eq1_step4"><b>Step 4:</b> Distance from center to vertex: a = 5</div>
              <div class="step-line" id="eq1_step5"><b>Step 5:</b> Find b using \(c^2 = a^2 - b^2\)</div>
              <div class="step-line" id="eq1_step6"><b>Step 6:</b> \(9 = 25 - b^2\) ‚Üí \(b^2 = 16\) ‚Üí \(b = 4\)</div>
              <div class="step-line" id="eq1_step7"><b>Step 7:</b> Equation: \(\frac{x^2}{25} + \frac{y^2}{16} = 1\)</div>
              <div style="margin-top:8px">
                <button class="next-step" onclick="nextStep('eq1')">Next Step</button>
              </div>
            </div>
            <div class="graph-container">
              <div class="graph" id="eq1-visual">
                <!-- Graph will be drawn here by JavaScript -->
              </div>
            </div>
          </div>

          <div class="example-box">
            <div class="big">Problem 2: Write equation with foci (0, ¬±4) and vertices (0, ¬±6)</div>
            <div class="controls">
              <button class="step-btn" onclick="startSteps('eq2')">Show Solution</button>
            </div>
            <div class="step-block" id="eq2">
              <div class="step-line" id="eq2_step1"><b>Step 1:</b> Foci are vertical, so major axis is vertical</div>
              <div class="step-line" id="eq2_step2"><b>Step 2:</b> Center is midpoint between foci: (0, 0)</div>
              <div class="step-line" id="eq2_step3"><b>Step 3:</b> Distance from center to focus: c = 4</div>
              <div class="step-line" id="eq2_step4"><b>Step 4:</b> Distance from center to vertex: a = 6</div>
              <div class="step-line" id="eq2_step5"><b>Step 5:</b> Find b using \(c^2 = a^2 - b^2\)</div>
              <div class="step-line" id="eq2_step6"><b>Step 6:</b> \(16 = 36 - b^2\) ‚Üí \(b^2 = 20\) ‚Üí \(b = \sqrt{20} = 2\sqrt{5}\)</div>
              <div class="step-line" id="eq2_step7"><b>Step 7:</b> Equation: \(\frac{x^2}{20} + \frac{y^2}{36} = 1\)</div>
              <div style="margin-top:8px">
                <button class="next-step" onclick="nextStep('eq2')">Next Step</button>
              </div>
            </div>
            <div class="graph-container">
              <div class="graph" id="eq2-visual">
                <!-- Graph will be drawn here by JavaScript -->
              </div>
            </div>
          </div>
        </div>

        <div class="try-yourself">
          <div class="try-title">‚ú® Try It Yourself</div>
          <p>1. Foci (¬±2, 0), vertices (¬±5, 0). What is the equation?</p>
          <div class="row">
            <input id="teq1" placeholder="Type equation">
            <button class="check" onclick="checkTextMotivate('teq1','x¬≤/25 + y¬≤/21 = 1','teq1_res')">Check</button>
          </div>
          <div id="teq1_res" class="result"></div>
          
          <p>2. Foci (0, ¬±3), vertices (0, ¬±5). What is the equation?</p>
          <div class="row">
            <input id="teq2" placeholder="Type equation">
            <button class="check" onclick="checkTextMotivate('teq2','x¬≤/16 + y¬≤/25 = 1','teq2_res')">Check</button>
          </div>
          <div id="teq2_res" class="result"></div>
        </div>

        <div class="self-care">
          <h4>üåà Progress Checkpoint üåà</h4>
          <p>You're learning to construct ellipse equations from their geometric properties - this is powerful mathematical thinking! üß†‚ú®</p>
        </div>
      </section>

      <!-- Completion Message -->
      <div class="self-care animate" style="margin-top:40px">
        <h3>üéâ Incredible Work! üéâ</h3>
        <p>You've completed the Ellipses chapter! You now understand ellipse elements, can write their equations, and identify their properties.</p>
        <p>üåü <strong>Your analytical geometry skills are growing impressively!</strong> üåü</p>
        <div class="emoji-row">
          <span class="math-emoji">ü•≥</span>
          <span class="math-emoji">üéä</span>
          <span class="math-emoji">üëè</span>
          <span class="math-emoji">üí´</span>
          <span class="math-emoji">üåà</span>
        </div>
      </div>
    </section>

    <!-- Exercise 6.5: Applications -->
    <section id="exercise-6.5" class="exercise-section">
      <!-- Welcome -->
      <div class="card animate">
        <h2>Welcome to Ellipse Applications and Problem Solving (Chapter 6.5)</h2>
        <p class="lead">Apply ellipse concepts to solve real-world problems and complex mathematical scenarios.</p>
        <div class="small-note">Based on FSc Part 2 Mathematics - Punjab Textbook Board</div>
      </div>

      <!-- Applications -->
      <div class="divider" id="applications">Applications</div>
      <section class="card animate delay-3">
        <h2>Real-World Applications of Ellipses</h2>
        <p class="lead">Explore how ellipses appear in astronomy, engineering, and everyday life.</p>
        
        <div class="question-box">
          <div class="question-text">Application 1: Planetary Orbits</div>
          <div class="controls">
            <button class="step-btn" onclick="startSteps('app1')">Show Solution</button>
          </div>
          <div class="step-block" id="app1">
            <div class="step-line" id="app1_step1"><b>Step 1:</b> A planet orbits the sun in an elliptical path with the sun at one focus</div>
            <div class="step-line" id="app1_step2"><b>Step 2:</b> Distance from sun ranges from 17 million miles to 183 million miles</div>
            <div class="step-line" id="app1_step3"><b>Step 3:</b> Minimum distance = a - c = 17</div>
            <div class="step-line" id="app1_step4"><b>Step 4:</b> Maximum distance = a + c = 183</div>
            <div class="step-line" id="app1_step5"><b>Step 5:</b> Add equations: 2a = 200 ‚Üí a = 100</div>
            <div class="step-line" id="app1_step6"><b>Step 6:</b> Subtract: 2c = 166 ‚Üí c = 83</div>
            <div class="step-line" id="app1_step7"><b>Step 7:</b> \(b^2 = a^2 - c^2 = 10000 - 6889 = 3111\)</div>
            <div class="step-line" id="app1_step8"><b>Step 8:</b> Equation: \(\frac{x^2}{10000} + \frac{y^2}{3111} = 1\)</div>
            <div style="margin-top:8px">
              <button class="next-step" onclick="nextStep('app1')">Next Step</button>
            </div>
          </div>
        </div>

        <div class="question-box">
          <div class="question-text">Application 2: Elliptical Arch</div>
          <div class="controls">
            <button class="step-btn" onclick="startSteps('app2')">Show Solution</button>
          </div>
          <div class="step-block" id="app2">
            <div class="step-line" id="app2_step1"><b>Step 1:</b> An elliptical arch is 90m wide at the base and 30m high at the center</div>
            <div class="step-line" id="app2_step2"><b>Step 2:</b> Place coordinate system with center at (0,0)</div>
            <div class="step-line" id="app2_step3"><b>Step 3:</b> Width = 90m ‚Üí semi-major axis a = 45</div>
            <div class="step-line" id="app2_step4"><b>Step 4:</b> Height = 30m ‚Üí semi-minor axis b = 30</div>
            <div class="step-line" id="app2_step5"><b>Step 5:</b> Equation: \(\frac{x^2}{2025} + \frac{y^2}{900} = 1\)</div>
            <div class="step-line" id="app2_step6"><b>Step 6:</b> At what distance from center is the arch 20‚àö2 m high?</div>
            <div class="step-line" id="app2_step7"><b>Step 7:</b> Substitute y = 20‚àö2 into equation</div>
            <div class="step-line" id="app2_step8"><b>Step 8:</b> \(\frac{x^2}{2025} + \frac{(20‚àö2)^2}{900} = 1\) ‚Üí \(\frac{x^2}{2025} + \frac{800}{900} = 1\)</div>
            <div class="step-line" id="app2_step9"><b>Step 9:</b> \(\frac{x^2}{2025} = 1 - \frac{8}{9} = \frac{1}{9}\) ‚Üí \(x^2 = 225\) ‚Üí \(x = ¬±15\)</div>
            <div style="margin-top:8px">
              <button class="next-step" onclick="nextStep('app2')">Next Step</button>
            </div>
          </div>
        </div>

        <div class="self-care">
          <h4>üåü You're Applying Ellipses to Real Problems! üåü</h4>
          <p>From planetary orbits to architectural arches, ellipses create beautiful, functional shapes in our world. üß©üí™</p>
        </div>
      </section>

      <!-- Problem Solving -->
      <div class="divider" id="problem-solving">Problem Solving</div>
      <section class="card animate delay-2">
        <h2>Complex Ellipse Problems</h2>
        <p class="lead">Solve challenging problems that combine multiple ellipse concepts and properties.</p>
        
        <div class="example-container">
          <div class="example-box">
            <div class="big">Problem 1: Find equations of ellipses with given data</div>
            <div class="controls">
              <button class="step-btn" onclick="startSteps('prob1')">Show Solution</button>
            </div>
            <div class="step-block" id="prob1">
              <div class="step-line" id="prob1_step1"><b>Step 1:</b> (i) Foci (¬±3,0) and minor axis of length 10</div>
              <div class="step-line" id="prob1_step2"><b>Step 2:</b> Foci at (¬±3,0) ‚áí c = 3, center at (0,0)</div>
              <div class="step-line" id="prob1_step3"><b>Step 3:</b> Minor axis length = 10 ‚áí 2b = 10 ‚áí b = 5</div>
              <div class="step-line" id="prob1_step4"><b>Step 4:</b> For ellipse: c¬≤ = a¬≤ - b¬≤ ‚áí 9 = a¬≤ - 25 ‚áí a¬≤ = 34</div>
              <div class="step-line" id="prob1_step5"><b>Step 5:</b> Since foci are on x-axis, major axis is horizontal</div>
              <div class="step-line" id="prob1_step6"><b>Step 6:</b> Equation: \(\frac{x^2}{34} + \frac{y^2}{25} = 1\)</div>
              <div class="step-line" id="prob1_step7"><b>Step 7:</b> (ii) Foci (0,-1) and (0,-5) and major axis of length 6</div>
              <div class="step-line" id="prob1_step8"><b>Step 8:</b> Foci: (0,-1) and (0,-5) ‚áí center at midpoint: (0,-3)</div>
              <div class="step-line" id="prob1_step9"><b>Step 9:</b> Distance between foci = 4 ‚áí 2c = 4 ‚áí c = 2</div>
              <div class="step-line" id="prob1_step10"><b>Step 10:</b> Major axis length = 6 ‚áí 2a = 6 ‚áí a = 3</div>
              <div class="step-line" id="prob1_step11"><b>Step 11:</b> b¬≤ = a¬≤ - c¬≤ = 9 - 4 = 5</div>
              <div class="step-line" id="prob1_step12"><b>Step 12:</b> Since foci are vertical, major axis is vertical</div>
              <div class="step-line" id="prob1_step13"><b>Step 13:</b> Equation: \(\frac{x^2}{5} + \frac{(y+3)^2}{9} = 1\)</div>
              <div style="margin-top:8px">
                <button class="next-step" onclick="nextStep('prob1')">Next Step</button>
              </div>
            </div>
            <div class="graph-container">
              <div class="graph" id="prob1-visual">
                <!-- Graph will be drawn here by JavaScript -->
              </div>
            </div>
          </div>

          <div class="example-box">
            <div class="big">Problem 2: Find the centre, foci, eccentricity, vertices and directrices</div>
            <div class="controls">
              <button class="step-btn" onclick="startSteps('prob2')">Show Solution</button>
            </div>
            <div class="step-block" id="prob2">
              <div class="step-line" id="prob2_step1"><b>Step 1:</b> (i) \(x^2 + 4y^2 = 16\)</div>
              <div class="step-line" id="prob2_step2"><b>Step 2:</b> Divide by 16: \(\frac{x^2}{16} + \frac{y^2}{4} = 1\)</div>
              <div class="step-line" id="prob2_step3"><b>Step 3:</b> Center: (0,0)</div>
              <div class="step-line" id="prob2_step4"><b>Step 4:</b> a¬≤ = 16 ‚áí a = 4, b¬≤ = 4 ‚áí b = 2</div>
              <div class="step-line" id="prob2_step5"><b>Step 5:</b> c¬≤ = a¬≤ - b¬≤ = 16 - 4 = 12 ‚áí c = 2‚àö3</div>
              <div class="step-line" id="prob2_step6"><b>Step 6:</b> Since a > b, major axis is horizontal</div>
              <div class="step-line" id="prob2_step7"><b>Step 7:</b> Foci: (¬±2‚àö3, 0)</div>
              <div class="step-line" id="prob2_step8"><b>Step 8:</b> Eccentricity: e = c/a = 2‚àö3/4 = ‚àö3/2</div>
              <div class="step-line" id="prob2_step9"><b>Step 9:</b> Vertices: (¬±4, 0)</div>
              <div class="step-line" id="prob2_step10"><b>Step 10:</b> (ii) \(9x^2 + y^2 = 18\)</div>
              <div class="step-line" id="prob2_step11"><b>Step 11:</b> Divide by 18: \(\frac{x^2}{2} + \frac{y^2}{18} = 1\)</div>
              <div class="step-line" id="prob2_step12"><b>Step 12:</b> Center: (0,0)</div>
              <div class="step-line" id="prob2_step13"><b>Step 13:</b> a¬≤ = 18 ‚áí a = 3‚àö2, b¬≤ = 2 ‚áí b = ‚àö2</div>
              <div class="step-line" id="prob2_step14"><b>Step 14:</b> c¬≤ = a¬≤ - b¬≤ = 18 - 2 = 16 ‚áí c = 4</div>
              <div class="step-line" id="prob2_step15"><b>Step 15:</b> Since a > b, major axis is vertical</div>
              <div class="step-line" id="prob2_step16"><b>Step 16:</b> Foci: (0, ¬±4)</div>
              <div class="step-line" id="prob2_step17"><b>Step 17:</b> Eccentricity: e = c/a = 4/(3‚àö2) = (2‚àö2)/3</div>
              <div class="step-line" id="prob2_step18"><b>Step 18:</b> Vertices: (0, ¬±3‚àö2)</div>
              <div style="margin-top:8px">
                <button class="next-step" onclick="nextStep('prob2')">Next Step</button>
              </div>
            </div>
            <div class="graph-container">
              <div class="graph" id="prob2-visual">
                <!-- Graph will be drawn here by JavaScript -->
              </div>
            </div>
          </div>
        </div>

        <div class="try-yourself">
          <div class="try-title">‚ú® Try It Yourself</div>
          <p>1. For an ellipse with foci (¬±4,0) and vertices (¬±6,0), what is the equation?</p>
          <div class="row">
            <input id="tprob1" placeholder="Type equation">
            <button class="check" onclick="checkTextMotivate('tprob1','x¬≤/36 + y¬≤/20 = 1','tprob1_res')">Check</button>
          </div>
          <div id="tprob1_res" class="result"></div>
          
          <p>2. What is the eccentricity of an ellipse with a=10 and b=6?</p>
          <div class="row">
            <input id="tprob2" placeholder="Type value">
            <button class="check" onclick="checkTextMotivate('tprob2','4/5','tprob2_res')">Check</button>
          </div>
          <div id="tprob2_res" class="result"></div>
        </div>

        <div class="self-care">
          <h4>üåà Progress Checkpoint üåà</h4>
          <p>You're mastering ellipse equations and their geometric properties - this is powerful mathematical thinking! üß†‚ú®</p>
        </div>
      </section>

      <!-- Completion Message -->
      <div class="self-care animate" style="margin-top:40px">
        <h3>üéâ Incredible Work! üéâ</h3>
        <p>You've completed the Ellipse Applications chapter! You now understand ellipse elements, can write their equations, and apply them to real-world problems.</p>
        <p>üåü <strong>Your analytical geometry skills are growing impressively!</strong> üåü</p>
        <div class="emoji-row">
          <span class="math-emoji">ü•≥</span>
          <span class="math-emoji">üéä</span>
          <span class="math-emoji">üëè</span>
          <span class="math-emoji">üí´</span>
          <span class="math-emoji">üåà</span>
        </div>
      </div>
    </section>

    <!-- Resources Section -->
    <section id="resources" class="exercise-section">
      <div class="card animate">
        <h2>Helpful Resources</h2>
        
        <div class="visual-element">
          <div class="emoji-row">
            <span class="math-emoji">üìö</span>
            <span class="math-emoji">üé•</span>
            <span class="math-emoji">üí°</span>
          </div>
        </div>
        
        <div class="resources">
          <div class="resource-card">
            <h3>Video Help</h3>
            <p>Short videos to help you understand:</p>
            <a href="https://www.youtube.com/watch?v=YBYl7ry5sUQ" target="_blank">üìπ Circle Equations</a>
            <a href="https://www.youtube.com/watch?v=P_qc_gzq1y8" target="_blank">üé¨ Tangents & Normals</a>
            <a href="https://www.youtube.com/watch?v=5nxT6LQhXLM" target="_blank">üìê Ellipse Properties</a>
          </div>
          
          <div class="resource-card">
            <h3>Practice Games</h3>
            <p>Fun ways to practice:</p>
            <a href="https://www.mathgames.com/geometry" target="_blank">üéÆ Geometry Practice</a>
            <a href="https://www.ixl.com/math/geometry" target="_blank">üïπÔ∏è Circle Games</a>
            <a href="https://www.desmos.com/calculator" target="_blank">üìä Graphing Tool</a>
          </div>
          
          <div class="resource-card">
            <h3>Study Tips</h3>
            <p>Simple ways to learn better:</p>
            <ul style="text-align:left; margin-left:20px;">
              <li>Draw diagrams for each problem</li>
              <li>Practice with different circle positions</li>
              <li>Review formulas regularly</li>
              <li>Connect concepts to real-world examples</li>
            </ul>
          </div>
        </div>

        <!-- Self-Care Note -->
        <div class="self-care animate delay-1">
          <h4>üí´ You've Got This! üí´</h4>
          <p>Learning is your journey. Go at your pace and celebrate every small victory! üå†üìñ</p>
        </div>
      </div>
    </section>
  </div>

  <!-- Sound toggle button -->
  <button id="soundToggle" class="sound-toggle" aria-pressed="true" title="Toggle ambient sound">
    <span class="icon" id="soundIcon">üîà</span>
    <span id="soundLabel">Sound On</span>
  </button>
  
  <div style="margin: 50px 0; text-align: center; padding: 30px; background: #f0fdf4; border: 2px dashed #10b981; border-radius: 12px;">
    <h3 style="color: #047857; margin-bottom: 10px;">Module Complete?</h3>
    <p style="color: #065f46; margin-bottom: 20px;">Test your understanding of Conic Sections to unlock the next step.</p>
    
    <a href="{{ url_for('serve_quiz', chapter_num=6) }}" class="btn btn-primary" style="background-color: #10b981; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4); padding: 15px 40px; font-size: 1.1rem;">
        Take Chapter 6 Quiz <i class="fas fa-arrow-right"></i>
    </a>
</div>

  <!-- Floating Action Button -->
  <div class="fab">
    <i class="fas fa-book-open"></i>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-about">
          <div class="footer-logo">
            <div class="footer-logo-icon">S</div>
            Sentellect
          </div>
          <p>Personalizing learning through emotions to improve educational experience for HSSC Mathematics.</p>
          <div class="social-links">
            <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
            <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
            <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
          </div>
        </div>
        
        <div class="footer-links">
          <h3>Exercises</h3>
          <ul>
            <li><a href="#exercise-6.1">6.1 Circles</a></li>
            <li><a href="#exercise-6.2">6.2 Tangents</a></li>
            <li><a href="#exercise-6.3">6.3 Properties</a></li>
            <li><a href="#exercise-6.4">6.4 Ellipses</a></li>
            <li><a href="#exercise-6.5">6.5 Applications</a></li>
          </ul>
        </div>
        
        <div class="footer-links">
          <h3>Resources</h3>
          <ul>
            <li><a href="#resources">Study Materials</a></li>
            <li><a href="#">Support</a></li>
          </ul>
        </div>
        
        <div class="footer-links">
          <h3>Account</h3>
          <ul>
            <li><a href="#">Student Login</a></li>
            <li><a href="#">Create Account</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p>¬© 2024 Sentellect. Final Year Project - Educational Technology.</p>
        <div class="footer-tags">
          <a href="#" class="tag">Conic Sections</a>
          <a href="#" class="tag">Circles</a>
          <a href="#" class="tag">Ellipses</a>
          <a href="#" class="tag">Stress-Free Learning</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Audio context for ambient sounds
    let audioContext;
    let oscillator;
    let gainNode;
    let isPlaying = false;

    // Initialize audio
    function initAudio() {
      try {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
        gainNode = audioContext.createGain();
        gainNode.gain.value = 0.3;
        gainNode.connect(audioContext.destination);
        
        // Create a gentle oscillator (like soft wind chimes)
        oscillator = audioContext.createOscillator();
        oscillator.type = 'sine';
        oscillator.frequency.value = 440; // A4 note
        oscillator.connect(gainNode);
        
        // Start the oscillator but immediately pause it
        oscillator.start();
        oscillator.stop();
        isPlaying = false;
      } catch (e) {
        console.log("Audio not supported or blocked by browser");
      }
    }

    // Play a gentle sound
    function playGentleSound() {
      if (!audioContext || !isPlaying) return;
      
      try {
        // Create a new oscillator for each note
        const note = audioContext.createOscillator();
        const noteGain = audioContext.createGain();
        
        note.type = 'sine';
        // Play a pleasant arpeggio: A4, C5, E5 (A minor chord)
        const frequencies = [440, 523.25, 659.25];
        note.frequency.value = frequencies[Math.floor(Math.random() * frequencies.length)];
        note.connect(noteGain);
        noteGain.connect(gainNode);
        
        // Fade in and out
        const now = audioContext.currentTime;
        noteGain.gain.setValueAtTime(0, now);
        noteGain.gain.linearRampToValueAtTime(0.3, now + 0.1);
        noteGain.gain.exponentialRampToValueAtTime(0.001, now + 1.5);
        
        note.start(now);
        note.stop(now + 1.5);
      } catch (e) {
        console.log("Error playing sound");
      }
    }

    // Toggle sound on/off
    function toggleSound() {
      const soundToggle = document.getElementById('soundToggle');
      const soundIcon = document.getElementById('soundIcon');
      const soundLabel = document.getElementById('soundLabel');
      
      if (!audioContext) {
        initAudio();
      }
      
      isPlaying = !isPlaying;
      
      if (isPlaying) {
        soundIcon.textContent = 'üîà';
        soundLabel.textContent = 'Sound On';
        soundToggle.classList.remove('sound-muted');
        
        // Play a gentle sound every 12 seconds
        if (window.soundInterval) {
          clearInterval(window.soundInterval);
        }
        window.soundInterval = setInterval(playGentleSound, 12000);
        playGentleSound(); // Play immediately
      } else {
        soundIcon.textContent = 'üîá';
        soundLabel.textContent = 'Sound Off';
        soundToggle.classList.add('sound-muted');
        
        if (window.soundInterval) {
          clearInterval(window.soundInterval);
        }
      }
    }

    // Header scroll effect
    window.addEventListener('scroll', function() {
      const header = document.getElementById('header');
      if (window.scrollY > 50) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
    });

    // Animation on scroll
    document.addEventListener('DOMContentLoaded', function() {
      const animateElements = document.querySelectorAll('.animate');
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const delay = entry.target.classList.contains('delay-1') ? 0.2 : 
                         entry.target.classList.contains('delay-2') ? 0.4 :
                         entry.target.classList.contains('delay-3') ? 0.6 : 0;
            
            setTimeout(() => {
              entry.target.style.opacity = 1;
              entry.target.style.transform = 'translateY(0)';
            }, delay * 1000);
          }
        });
      }, { threshold: 0.1 });
      
      animateElements.forEach(element => {
        element.style.opacity = 0;
        element.style.transform = 'translateY(20px)';
        element.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(element);
      });
      
      // Set up sound toggle
      document.getElementById('soundToggle').addEventListener('click', toggleSound);
      
      // Initialize audio (but don't start playing yet)
      initAudio();
      
      // Draw initial graphs
      drawGraphs();
    });

    // Draw graphs for examples
    function drawGraphs() {
      // Draw different graphs for each example
      drawCircle1();
      drawCircle2();
      drawEllipse1();
      drawEllipse2();
      drawEllipse3();
      drawEllipse4();
    }

    function drawCircle1() {
      // Graph for Circle Example 1
      const container = document.getElementById('circle1-visual');
      if (!container) return;
      
      container.innerHTML = '';
      
      // Create axes
      const xAxis = document.createElement('div');
      xAxis.className = 'graph-axes x-axis';
      container.appendChild(xAxis);
      
      const yAxis = document.createElement('div');
      yAxis.className = 'graph-axes y-axis';
      container.appendChild(yAxis);
      
      // Draw circle
      const circle = document.createElement('div');
      circle.className = 'graph-ellipse';
      circle.style.width = '70%';
      circle.style.height = '70%';
      container.appendChild(circle);
      
      // Draw center
      const center = document.createElement('div');
      center.className = 'graph-center';
      center.style.top = '50%';
      center.style.left = '50%';
      container.appendChild(center);
    }

    function drawCircle2() {
      // Graph for Circle Example 2
      const container = document.getElementById('circle2-visual');
      if (!container) return;
      
      container.innerHTML = '';
      
      // Create axes
      const xAxis = document.createElement('div');
      xAxis.className = 'graph-axes x-axis';
      container.appendChild(xAxis);
      
      const yAxis = document.createElement('div');
      yAxis.className = 'graph-axes y-axis';
      container.appendChild(yAxis);
      
      // Draw circle
      const circle = document.createElement('div');
      circle.className = 'graph-ellipse';
      circle.style.width = '60%';
      circle.style.height = '60%';
      container.appendChild(circle);
      
      // Draw center
      const center = document.createElement('div');
      center.className = 'graph-center';
      center.style.top = '50%';
      center.style.left = '50%';
      container.appendChild(center);
    }

    function drawEllipse1() {
      // Graph for Problem 1: x¬≤/16 + y¬≤/9 = 1
      const container = document.getElementById('elem1-visual');
      if (!container) return;
      
      container.innerHTML = '';
      
      // Create axes
      const xAxis = document.createElement('div');
      xAxis.className = 'graph-axes x-axis';
      container.appendChild(xAxis);
      
      const yAxis = document.createElement('div');
      yAxis.className = 'graph-axes y-axis';
      container.appendChild(yAxis);
      
      // Draw ellipse
      const ellipse = document.createElement('div');
      ellipse.className = 'graph-ellipse';
      ellipse.style.width = '80%';
      ellipse.style.height = '60%';
      container.appendChild(ellipse);
      
      // Draw center
      const center = document.createElement('div');
      center.className = 'graph-center';
      center.style.top = '50%';
      center.style.left = '50%';
      container.appendChild(center);
      
      // Draw vertices
      const vertex1 = document.createElement('div');
      vertex1.className = 'graph-vertex';
      vertex1.style.top = '50%';
      vertex1.style.left = '30%';
      container.appendChild(vertex1);
      
      const vertex2 = document.createElement('div');
      vertex2.className = 'graph-vertex';
      vertex2.style.top = '50%';
      vertex2.style.left = '70%';
      container.appendChild(vertex2);
      
      // Draw foci
      const focus1 = document.createElement('div');
      focus1.className = 'graph-focus';
      focus1.style.top = '50%';
      focus1.style.left = '44%';
      container.appendChild(focus1);
      
      const focus2 = document.createElement('div');
      focus2.className = 'graph-focus';
      focus2.style.top = '50%';
      focus2.style.left = '56%';
      container.appendChild(focus2);
    }

    function drawEllipse2() {
      // Graph for Problem 2: x¬≤/9 + y¬≤/25 = 1
      const container = document.getElementById('elem2-visual');
      if (!container) return;
      
      container.innerHTML = '';
      
      // Create axes
      const xAxis = document.createElement('div');
      xAxis.className = 'graph-axes x-axis';
      container.appendChild(xAxis);
      
      const yAxis = document.createElement('div');
      yAxis.className = 'graph-axes y-axis';
      container.appendChild(yAxis);
      
      // Draw ellipse
      const ellipse = document.createElement('div');
      ellipse.className = 'graph-ellipse';
      ellipse.style.width = '60%';
      ellipse.style.height = '80%';
      container.appendChild(ellipse);
      
      // Draw center
      const center = document.createElement('div');
      center.className = 'graph-center';
      center.style.top = '50%';
      center.style.left = '50%';
      container.appendChild(center);
      
      // Draw vertices
      const vertex1 = document.createElement('div');
      vertex1.className = 'graph-vertex';
      vertex1.style.top = '30%';
      vertex1.style.left = '50%';
      container.appendChild(vertex1);
      
      const vertex2 = document.createElement('div');
      vertex2.className = 'graph-vertex';
      vertex2.style.top = '70%';
      vertex2.style.left = '50%';
      container.appendChild(vertex2);
      
      // Draw foci
      const focus1 = document.createElement('div');
      focus1.className = 'graph-focus';
      focus1.style.top = '42%';
      focus1.style.left = '50%';
      container.appendChild(focus1);
      
      const focus2 = document.createElement('div');
      focus2.className = 'graph-focus';
      focus2.style.top = '58%';
      focus2.style.left = '50%';
      container.appendChild(focus2);
    }

    function drawEllipse3() {
      // Graph for Equation 1: x¬≤/25 + y¬≤/16 = 1
      const container = document.getElementById('eq1-visual');
      if (!container) return;
      
      container.innerHTML = '';
      
      // Create axes
      const xAxis = document.createElement('div');
      xAxis.className = 'graph-axes x-axis';
      container.appendChild(xAxis);
      
      const yAxis = document.createElement('div');
      yAxis.className = 'graph-axes y-axis';
      container.appendChild(yAxis);
      
      // Draw ellipse
      const ellipse = document.createElement('div');
      ellipse.className = 'graph-ellipse';
      ellipse.style.width = '80%';
      ellipse.style.height = '64%';
      container.appendChild(ellipse);
      
      // Draw center
      const center = document.createElement('div');
      center.className = 'graph-center';
      center.style.top = '50%';
      center.style.left = '50%';
      container.appendChild(center);
      
      // Draw vertices
      const vertex1 = document.createElement('div');
      vertex1.className = 'graph-vertex';
      vertex1.style.top = '50%';
      vertex1.style.left = '30%';
      container.appendChild(vertex1);
      
      const vertex2 = document.createElement('div');
      vertex2.className = 'graph-vertex';
      vertex2.style.top = '50%';
      vertex2.style.left = '70%';
      container.appendChild(vertex2);
      
      // Draw foci
      const focus1 = document.createElement('div');
      focus1.className = 'graph-focus';
      focus1.style.top = '50%';
      focus1.style.left = '44%';
      container.appendChild(focus1);
      
      const focus2 = document.createElement('div');
      focus2.className = 'graph-focus';
      focus2.style.top = '50%';
      focus2.style.left = '56%';
      container.appendChild(focus2);
    }

    function drawEllipse4() {
      // Graph for Equation 2: x¬≤/20 + y¬≤/36 = 1
      const container = document.getElementById('eq2-visual');
      if (!container) return;
      
      container.innerHTML = '';
      
      // Create axes
      const xAxis = document.createElement('div');
      xAxis.className = 'graph-axes x-axis';
      container.appendChild(xAxis);
      
      const yAxis = document.createElement('div');
      yAxis.className = 'graph-axes y-axis';
      container.appendChild(yAxis);
      
      // Draw ellipse
      const ellipse = document.createElement('div');
      ellipse.className = 'graph-ellipse';
      ellipse.style.width = '67%';
      ellipse.style.height = '80%';
      container.appendChild(ellipse);
      
      // Draw center
      const center = document.createElement('div');
      center.className = 'graph-center';
      center.style.top = '50%';
      center.style.left = '50%';
      container.appendChild(center);
      
      // Draw vertices
      const vertex1 = document.createElement('div');
      vertex1.className = 'graph-vertex';
      vertex1.style.top = '30%';
      vertex1.style.left = '50%';
      container.appendChild(vertex1);
      
      const vertex2 = document.createElement('div');
      vertex2.className = 'graph-vertex';
      vertex2.style.top = '70%';
      vertex2.style.left = '50%';
      container.appendChild(vertex2);
      
      // Draw foci
      const focus1 = document.createElement('div');
      focus1.className = 'graph-focus';
      focus1.style.top = '42%';
      focus1.style.left = '50%';
      container.appendChild(focus1);
      
      const focus2 = document.createElement('div');
      focus2.className = 'graph-focus';
      focus2.style.top = '58%';
      focus2.style.left = '50%';
      container.appendChild(focus2);
    }

    // Exercise navigation
    function showExercise(exerciseId) {
      // Hide all exercise sections
      document.querySelectorAll('.exercise-section').forEach(section => {
        section.classList.remove('active');
      });
      
      // Show selected exercise section
      document.getElementById(exerciseId).classList.add('active');
      
      // Update active button
      document.querySelectorAll('.exercise-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      
      // Scroll to top of exercises
      document.querySelector('.exercise-nav').scrollIntoView({ behavior: 'smooth' });
    }

    // Toggle scenario explanations
    function toggleScenario(concept, id) {
      const el = document.getElementById(`${concept}-${id}`);
      if (el.style.display === "block") {
        el.style.display = "none";
      } else {
        el.style.display = "block";
      }
    }

    // Start step-by-step examples
    function startSteps(id) {
      const steps = document.querySelectorAll(`#${id} .step-line`);
      steps.forEach(s => s.style.display = "none");
      const nextBtn = document.querySelector(`#${id} .next-step`);
      if (nextBtn) nextBtn.style.display = "block";
      if (steps[0]) steps[0].style.display = "block";
      
      // Play gentle sound when starting steps
      if (isPlaying) playGentleSound();
    }

    // Show next step in examples
    function nextStep(id) {
      const steps = document.querySelectorAll(`#${id} .step-line`);
      const nextBtn = document.querySelector(`#${id} .next-step`);
      let shownIndex = -1;
      
      steps.forEach((s, i) => {
        if (s.style.display === "block") shownIndex = i;
      });
      
      if (shownIndex + 1 < steps.length) {
        steps[shownIndex + 1].style.display = "block";
        
        // Play gentle sound for each step
        if (isPlaying) playGentleSound();
      } else {
        if (nextBtn) nextBtn.style.display = "none";
      }
    }

    // Check text input answers with motivational feedback
    function checkTextMotivate(inputId, correct, resultId) {
      const userAns = document.getElementById(inputId).value.trim().toLowerCase();
      const resultEl = document.getElementById(resultId);
      const correctAns = correct.trim().toLowerCase();
      
      const motivationalMessages = [
        "Great job! You're getting it!",
        "Excellent work! Keep it up!",
        "Perfect! You're mastering this!",
        "Well done! You're on the right track!",
        "Correct! You're doing amazing!"
      ];
      
      const tryAgainMessages = [
        "Almost! Try again with a fresh perspective.",
        "Not quite, but you're close! Try once more.",
        "Good attempt! Let's try that again.",
        "Not exactly, but you're learning! Try again.",
        "Almost there! Give it another shot."
      ];
      
      const randomGood = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)];
      const randomTry = tryAgainMessages[Math.floor(Math.random() * tryAgainMessages.length)];

      if (userAns === correctAns) {
        resultEl.innerHTML = `‚úÖ ${randomGood}`;
        resultEl.className = "result good";
        
        // Play success sound
        if (isPlaying) {
          try {
            const success = audioContext.createOscillator();
            const successGain = audioContext.createGain();
            
            success.type = 'sine';
            success.frequency.value = 523.25; // C5 note
            success.connect(successGain);
            successGain.connect(gainNode);
            
            const now = audioContext.currentTime;
            successGain.gain.setValueAtTime(0, now);
            successGain.gain.linearRampToValueAtTime(0.4, now + 0.1);
            successGain.gain.exponentialRampToValueAtTime(0.001, now + 0.8);
            
            success.start(now);
            success.stop(now + 0.8);
          } catch (e) {
            console.log("Error playing success sound");
          }
        }
      } else {
        resultEl.innerHTML = `‚ùå ${randomTry} <br><small>Hint: correct answer is <b>${correct}</b></small>`;
        resultEl.className = "result warn";
      }
      resultEl.style.display = "block";
    }
  </script>
</body>
</html>